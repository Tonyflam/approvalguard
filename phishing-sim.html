<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$PEPE Airdrop - Claim Your Free Tokens!</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #0f3460 50%, #16213e 100%);
      min-height: 100vh;
      color: white;
    }
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      background: rgba(0,0,0,0.3);
    }
    .logo {
      font-size: 24px;
      font-weight: bold;
      color: #00ff88;
    }
    .nav-links a {
      color: #aaa;
      text-decoration: none;
      margin-left: 30px;
    }
    .hero {
      text-align: center;
      padding: 80px 20px;
    }
    .hero h1 {
      font-size: 48px;
      margin-bottom: 20px;
      background: linear-gradient(90deg, #00ff88, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .hero p {
      font-size: 20px;
      color: #aaa;
      margin-bottom: 40px;
    }
    .claim-box {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      margin: 0 auto;
    }
    .token-amount {
      font-size: 64px;
      font-weight: bold;
      color: #00ff88;
      margin: 20px 0;
    }
    .token-value {
      color: #888;
      margin-bottom: 30px;
    }
    .claim-btn {
      background: linear-gradient(90deg, #00ff88, #00d4ff);
      color: #000;
      border: none;
      padding: 18px 60px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 30px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .claim-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 40px rgba(0,255,136,0.3);
    }
    .claim-btn:disabled {
      background: #444;
      cursor: not-allowed;
    }
    .status {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      display: none;
    }
    .status.error {
      background: rgba(255,0,0,0.2);
      border: 1px solid #ff4444;
      display: block;
    }
    .status.success {
      background: rgba(0,255,0,0.2);
      border: 1px solid #00ff88;
      display: block;
    }
    .features {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 60px;
      flex-wrap: wrap;
      padding: 0 20px;
    }
    .feature {
      text-align: center;
      max-width: 200px;
    }
    .feature-icon {
      font-size: 40px;
      margin-bottom: 10px;
    }
    .feature h3 {
      margin-bottom: 8px;
    }
    .feature p {
      color: #888;
      font-size: 14px;
    }
    .countdown {
      background: rgba(255,0,0,0.2);
      border: 1px solid #ff4444;
      padding: 15px 30px;
      border-radius: 10px;
      display: inline-block;
      margin-bottom: 30px;
    }
    .countdown span {
      font-size: 24px;
      font-weight: bold;
      color: #ff4444;
    }
    .wallet-info {
      background: rgba(0,0,0,0.3);
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 14px;
    }
    .partners {
      margin-top: 60px;
      text-align: center;
      padding: 40px;
      background: rgba(0,0,0,0.2);
    }
    .partners h3 {
      color: #666;
      margin-bottom: 20px;
    }
    .partner-logos {
      display: flex;
      justify-content: center;
      gap: 40px;
      opacity: 0.5;
    }
    .warning-banner {
      background: #ff4444;
      color: white;
      text-align: center;
      padding: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="warning-banner">
    ‚ö†Ô∏è THIS IS A SIMULATED PHISHING SITE FOR TESTING YOUR EXTENSION ‚ö†Ô∏è
  </div>

  <nav class="navbar">
    <div class="logo">üê∏ PepeAirdrop</div>
    <div class="nav-links">
      <a href="#">Home</a>
      <a href="#">About</a>
      <a href="#">FAQ</a>
      <span class="wallet-info" id="walletInfo">Not Connected</span>
    </div>
  </nav>

  <section class="hero">
    <div class="countdown">
      Airdrop ends in: <span id="countdown">23:59:59</span>
    </div>
    
    <h1>üê∏ Claim Your Free $PEPE Tokens!</h1>
    <p>Exclusive airdrop for early supporters. Connect wallet to check eligibility.</p>

    <div class="claim-box">
      <p>Your Allocation:</p>
      <div class="token-amount" id="tokenAmount">---</div>
      <p class="token-value" id="tokenValue">Connect wallet to check</p>
      
      <button class="claim-btn" id="mainBtn" onclick="handleMainAction()">
        Connect Wallet
      </button>
      
      <div class="status" id="status"></div>
    </div>

    <div class="features">
      <div class="feature">
        <div class="feature-icon">üîí</div>
        <h3>Secure</h3>
        <p>Audited smart contracts</p>
      </div>
      <div class="feature">
        <div class="feature-icon">‚ö°</div>
        <h3>Instant</h3>
        <p>Tokens sent immediately</p>
      </div>
      <div class="feature">
        <div class="feature-icon">üéÅ</div>
        <h3>Free</h3>
        <p>No gas fees required</p>
      </div>
    </div>
  </section>

  <section class="partners">
    <h3>Trusted By</h3>
    <div class="partner-logos">
      <span>Binance</span>
      <span>Coinbase</span>
      <span>MetaMask</span>
      <span>OpenSea</span>
    </div>
  </section>

  <script>
    let userAccount = null;
    let isConnected = false;

    // Fake countdown timer
    function updateCountdown() {
      const now = new Date();
      const hours = 23 - now.getHours() % 24;
      const mins = 59 - now.getMinutes();
      const secs = 59 - now.getSeconds();
      document.getElementById('countdown').textContent = 
        `${hours.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    async function handleMainAction() {
      if (!isConnected) {
        await connectWallet();
      } else {
        await claimTokens();
      }
    }

    async function connectWallet() {
      if (typeof window.ethereum === 'undefined') {
        showStatus('error', 'MetaMask not detected! Please install MetaMask.');
        return;
      }

      try {
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        userAccount = accounts[0];
        isConnected = true;
        
        document.getElementById('walletInfo').textContent = 
          `${userAccount.slice(0,6)}...${userAccount.slice(-4)}`;
        
        // Fake "checking eligibility"
        document.getElementById('mainBtn').textContent = 'Checking...';
        document.getElementById('mainBtn').disabled = true;
        
        await new Promise(r => setTimeout(r, 2000));
        
        // Show fake allocation (always "eligible" for testing)
        const fakeAmount = Math.floor(Math.random() * 900000) + 100000;
        document.getElementById('tokenAmount').textContent = fakeAmount.toLocaleString() + ' PEPE';
        document.getElementById('tokenValue').textContent = `‚âà $${(fakeAmount * 0.00001).toFixed(2)} USD`;
        
        document.getElementById('mainBtn').textContent = 'üéÅ Claim Tokens';
        document.getElementById('mainBtn').disabled = false;
        
        showStatus('success', '‚úÖ You are eligible! Click "Claim Tokens" to receive your airdrop.');
        
      } catch (error) {
        showStatus('error', 'Connection failed: ' + error.message);
      }
    }

    async function claimTokens() {
      document.getElementById('mainBtn').textContent = 'Processing...';
      document.getElementById('mainBtn').disabled = true;
      
      try {
        // THIS IS THE ATTACK! Simulating what a real phishing site does:
        // They request a Permit signature that allows them to drain your tokens
        
        const typedData = {
          types: {
            EIP712Domain: [
              { name: "name", type: "string" },
              { name: "version", type: "string" },
              { name: "chainId", type: "uint256" },
              { name: "verifyingContract", type: "address" }
            ],
            Permit: [
              { name: "owner", type: "address" },
              { name: "spender", type: "address" },
              { name: "value", type: "uint256" },
              { name: "nonce", type: "uint256" },
              { name: "deadline", type: "uint256" }
            ]
          },
          primaryType: "Permit",
          domain: {
            name: "USD Coin",
            version: "2",
            chainId: 1,
            verifyingContract: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"
          },
          message: {
            owner: userAccount,
            spender: "0x000000000000000000000000000000000000dEaD", // Attacker address
            value: "115792089237316195423570985008687907853269984665640564039457584007913129639935", // Max uint256 = unlimited
            nonce: 0,
            deadline: 9999999999
          }
        };

        console.log("[PHISHING SIM] Requesting malicious Permit signature...");
        
        const signature = await window.ethereum.request({
          method: 'eth_signTypedData_v4',
          params: [userAccount, JSON.stringify(typedData)]
        });
        
        // If we get here, the user approved (extension didn't block)
        showStatus('success', '‚ö†Ô∏è Signature obtained! In a real attack, your funds would be drained now.');
        document.getElementById('mainBtn').textContent = 'Claimed!';
        
      } catch (error) {
        if (error.message.includes('blocked') || error.message.includes('Approval Guard')) {
          showStatus('success', 'üõ°Ô∏è BLOCKED BY EXTENSION! Your wallet is protected!');
          document.getElementById('mainBtn').textContent = 'üõ°Ô∏è Attack Blocked!';
          document.getElementById('mainBtn').style.background = '#4caf50';
        } else if (error.message.includes('User rejected') || error.message.includes('denied')) {
          showStatus('error', 'You rejected the signature. Good job staying safe!');
          document.getElementById('mainBtn').textContent = 'üéÅ Claim Tokens';
          document.getElementById('mainBtn').disabled = false;
        } else {
          showStatus('error', 'Error: ' + error.message);
          document.getElementById('mainBtn').textContent = 'üéÅ Claim Tokens';
          document.getElementById('mainBtn').disabled = false;
        }
      }
    }

    function showStatus(type, message) {
      const status = document.getElementById('status');
      status.className = 'status ' + type;
      status.textContent = message;
    }

    // Check if already connected
    window.addEventListener('load', async () => {
      if (typeof window.ethereum !== 'undefined') {
        const accounts = await window.ethereum.request({ method: 'eth_accounts' });
        if (accounts.length > 0) {
          userAccount = accounts[0];
          isConnected = true;
          document.getElementById('walletInfo').textContent = 
            `${userAccount.slice(0,6)}...${userAccount.slice(-4)}`;
          document.getElementById('mainBtn').textContent = 'üéÅ Claim Tokens';
          document.getElementById('tokenAmount').textContent = '500,000 PEPE';
          document.getElementById('tokenValue').textContent = '‚âà $5.00 USD';
        }
      }
    });
  </script>
</body>
</html>
